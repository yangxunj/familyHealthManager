# 当前工作计划：第二阶段 - 用户认证模块

> 开始日期：2026-01-21
>
> 目标：完成用户注册、登录、Token管理功能

---

## 1. 后端认证模块 (Auth Module)

- [x] **1.1 创建 auth 模块结构**
  - [x] 1.1.1 生成 auth 模块、控制器、服务
  - [x] 1.1.2 创建 DTO（RegisterDto, LoginDto）
  - [x] 1.1.3 安装 passport, @nestjs/jwt, bcrypt 等依赖

- [x] **1.2 实现认证接口**
  - [x] 1.2.1 实现用户注册接口（密码 bcrypt 加密）
  - [x] 1.2.2 实现用户登录接口（生成 JWT）
  - [x] 1.2.3 实现 Token 刷新接口

- [x] **1.3 实现 JWT 认证**
  - [x] 1.3.1 配置 JwtModule
  - [x] 1.3.2 实现 JwtStrategy
  - [x] 1.3.3 实现 JwtAuthGuard
  - [x] 1.3.4 创建 @CurrentUser 装饰器

---

## 2. 后端用户模块 (Users Module)

- [x] **2.1 创建 users 模块结构**
  - [x] 2.1.1 生成 users 模块、控制器、服务
  - [x] 2.1.2 创建 DTO（UpdateUserDto, ChangePasswordDto）

- [x] **2.2 实现用户接口**
  - [x] 2.2.1 实现获取当前用户信息接口
  - [x] 2.2.2 实现更新用户信息接口
  - [x] 2.2.3 实现修改密码接口

---

## 3. 前端认证功能

- [x] **3.1 认证页面**
  - [x] 3.1.1 登录页面
  - [x] 3.1.2 注册页面
  - [x] 3.1.3 路由守卫

- [x] **3.2 认证状态管理**
  - [x] 3.2.1 创建 auth store (Zustand)
  - [x] 3.2.2 实现 Token 存储和自动刷新
  - [x] 3.2.3 创建 auth API 服务

- [x] **3.3 对接认证接口**
  - [x] 3.3.1 对接登录接口
  - [x] 3.3.2 对接注册接口
  - [x] 3.3.3 对接获取用户信息接口
  - [x] 3.3.4 更新 Header 显示用户名

---

## 验收标准

- [x] 用户可以注册新账号
- [x] 用户可以登录并获取 Token
- [x] Token 过期后可自动刷新
- [x] 未登录用户被正确拦截
- [x] 登录后显示正确的用户名

---

## 备注

- JWT 过期时间：accessToken 15分钟，refreshToken 7天
- 密码加密：bcrypt，salt rounds = 10
- 后端端口：5001
- 前端端口：5173
